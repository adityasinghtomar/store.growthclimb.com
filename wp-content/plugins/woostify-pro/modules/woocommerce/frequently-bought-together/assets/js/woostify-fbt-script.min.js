"use strict";function math_round(t){return(Math.round(100*t)/100).toFixed(2)}function formatMoney(t,e,o,r){e=isNaN(e=Math.abs(e))?2:e,o=void 0===o?".":o,r=void 0===r?",":r;var a=t<0?"-":"",i=String(parseInt(t=Math.abs(Number(t)||0).toFixed(e))),c=(c=i.length)>3?c%3:0;return a+(c?i.substr(0,c)+r:"")+i.substr(c).replace(/(\decSep{3})(?=\decSep)/g,"$1"+r)+(e?o+Math.abs(t-i).toFixed(e).slice(2):"")}function woostify_fbt_onchange_input_check_total_discount(){var t=0,e=0,o=document.querySelector(".woostify-fbt"),r=document.querySelector(".woostify-fbt__products"),a=woostify_fbt.options,i=a.type||"discount-per-item",c=a.display_products_saved||"percent_off",n="discount-per-item"==i,s="percent_off"==c;if(!r)return;document.querySelectorAll(".woostify-fbt__products input[type=checkbox]:checked").length;var u=(r.getAttribute("data-total-discount").split(","),'<span class="woocommerce-Price-currencySymbol">'+document.querySelector(".woostify-fbt__discount .current-price span.woocommerce-Price-amount .woocommerce-Price-currencySymbol",o).outerHTML+"</span>"),l="",l="."==woostify_fbt.thousand_separator?"\\.":woostify_fbt.thousand_separator,l=RegExp(l,"g");document.querySelectorAll(".woostify-fbt__products input[type=checkbox]:checked").forEach(function(o){var r=o.parentNode,a=parseFloat(r.getAttribute("data-item-price-with-filter").replace(l,"").replace(",",".")),i=r.getAttribute("data-item-discount"),c=(r.querySelector(".woostify-fbt__product-price .woocommerce-Price-amount"),"");t+=a;var u=a;if(n){u=s?parseFloat(u*(100-i)/100).toFixed(2):parseFloat(u-i).toFixed(2),e+=parseFloat(u),u=u.toString().replace(".",woostify_fbt.decimal_separator).replace(/\B(?=(\d{3})+(?!\d))/g,woostify_fbt.thousand_separator);var d='<span class="woocommerce-Price-currencySymbol">'+document.querySelector(".woostify-fbt__discount span.woocommerce-Price-amount .woocommerce-Price-currencySymbol",r).outerHTML+"</span>";c=woostify_fbt.currency_pos.indexOf("right")>=0?u+d:d+u}}),e=e.toFixed(2);var d=s?((t-e)/t*100).toFixed(2):t-e;if(!n&&(d=woostify_fbt.settings.woostify_fbt_total_discount||0,document.querySelectorAll(".woostify-fbt__products input[type=checkbox]:not(:checked)").length?(d=0,e=t):e=s?(t-t*d/100).toFixed(2):t-d),d=parseFloat(parseFloat(d).toFixed(2)),0==t&&(e=d=0),woostify_fbt.currency_pos.indexOf("right")>=0)var f="",p=u;else var f=u,p="";document.querySelector(".woostify-fbt__discount .current-price span.woocommerce-Price-amount",o).innerHTML=f+math_round(e).toString().replace(".",woostify_fbt.decimal_separator).replace(/\B(?=(\d{3})+(?!\d))/g,woostify_fbt.thousand_separator)+p;let y=document.querySelector(".woostify-fbt__discount .old-price span.woocommerce-Price-amount",o);t==e?y.parentNode.style.display="none":(y.parentNode.style.display="",y.innerHTML=f+math_round(t).toString().replace(".",woostify_fbt.decimal_separator).replace(/\B(?=(\d{3})+(?!\d))/g,woostify_fbt.thousand_separator)+p);let b=document.querySelector(".woostify-fbt__discount .saved",o);0!=d?(b.parentNode.style.display="",b.innerHTML=d+(s?"%":u)):b.parentNode.style.display="none"}function woostify_fbt_add_all_to_cart(t,e){t.preventDefault(),e.closest(".woostify-fbt");var o=[],r=e.attr("data-variation_id"),a={},i="";r&&"undefined"!=r||(r=0),document.querySelectorAll(".woostify-fbt .woostify-fbt__products .woostify-fbt__product--item").forEach(function(t){t.querySelectorAll('input[type="checkbox"]:checked').length&&o.push(t.getAttribute("data-product-id"))}),a[r]={},document.querySelectorAll(".woostify-fbt__products .product_variations").forEach(function(t){if(t.classList.contains("main-product"))t.querySelectorAll("select").forEach(function(t,e){""!=t.value&&(a[r]["attribute_"+t.getAttribute("data-attribute")]=t.value)});else{var e=t.getAttribute("data-product_id"),o={},i="",c=t.querySelectorAll("select").length;t.querySelectorAll("select").forEach(function(t,e){""!=t.value&&(i+=t.getAttribute("data-attribute").replace("pa_","")+": "+t.value,e<c-1&&(i+=" + "),o["attribute_"+t.getAttribute("data-attribute")]=t.value)}),o.variable=i,a[e]=o}}),i=JSON.parse(JSON.stringify(a)),o&&jQuery.ajax({type:"POST",url:woostify_fbt.ajaxurl+"?wc-ajax=woostify-fbt-add-to-cart",data:{action:"woostify_fbt_add_all_to_cart",list_product_id:o,bundle_variable:i,_nonce:woostify_fbt._nonce},beforeSend:function(){e.addClass("loading")},success:function(t){woostifyAjaxSingleUpdateFragments(),setTimeout(function(){e.removeClass("loading"),cartSidebarOpen(),closeAll()},3e3)}})}function woostify_fbt_drag_to_scroll(){let t=document.querySelector(".woostify-fbt__products-list .woostify-fbt__products");if(!t)return;let e=!1,o,r;t.addEventListener("mousedown",a=>{e=!0,t.classList.add("active"),o=a.pageX-t.offsetLeft,r=t.scrollLeft}),t.addEventListener("mouseleave",()=>{e=!1,t.classList.remove("active")}),t.addEventListener("mouseup",()=>{e=!1,t.classList.remove("active")}),t.addEventListener("mousemove",a=>{if(!e)return;a.preventDefault();let i=a.pageX-t.offsetLeft,c=(i-o)*1;t.scrollLeft=r-c})}window.__cfRLUnblockHandlers=!0,document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(".woostify-fbt__products select");t.forEach(function(t){t.addEventListener("change",function(t){var e=t.currentTarget.closest(".product"),o=t.currentTarget.closest(".product_variations"),r=JSON.parse(o.getAttribute("data-variations")),a={};o.querySelectorAll("select").forEach(t=>{var e=t.getAttribute("data-attribute_name"),o=t.value;a[e]=o});var i=r.filter(function(t){var e=t.attributes,o=!0;for(var r in a)if(""==e[r])o=!0;else if(a[r]!==e[r])return!1;return o}),c=e.querySelector(".woostify-fbt__product-price");let n=e.querySelector(".woostify-fbt_product__outofstock");if(!i.length||!i[0].is_in_stock){c.classList.add("unavailable"),c.style.display="none",n.innerHTML=woostify_fbt.outofstock_text;let s=e.querySelector("input[type=checkbox]");if("woostify_fbt_product_main"!=s.id){s.checked=!1;let u=new Event("change");s.dispatchEvent(u),s.disabled=!0}return}if(i[0].price_html){c.classList.remove("unavailable"),c.style.display="",c.innerHTML=i[0].price_html,n.innerHTML="";let l=e.querySelector("input[type=checkbox]");if("woostify_fbt_product_main"!=l.id&&(l.disabled=!1,!l.checked)){l.checked=!0;let d=new Event("change");l.dispatchEvent(d)}}e.setAttribute("data-item-price",i[0].display_price);var f=formatMoney(i[0].display_price,woostify_fbt.number_decimals,woostify_fbt.decimal_separator,woostify_fbt.thousand_separator);e.setAttribute("data-item-price-with-filter",f),e.classList.contains("woostify-fbt__product--item-main")&&(document.querySelector(".woostify-fbt__button").setAttribute("data-variation_id",i[0].variation_id),e.querySelector("#woostify_fbt_product_main").value=i[0].variation_id),e.setAttribute("data-product-id",i[0].variation_id),woostify_fbt_onchange_input_check_total_discount()})}),t.length&&t.forEach(function(t){var e=new Event("change");t.dispatchEvent(e)}),woostify_fbt_onchange_input_check_total_discount(),woostify_fbt_drag_to_scroll(),document.querySelectorAll(".woostify-fbt__products").forEach(function(t){var e=t.getAttribute("data-product_count");t.style.gridTemplateColumns="repeat("+e+", 1fr)"})});