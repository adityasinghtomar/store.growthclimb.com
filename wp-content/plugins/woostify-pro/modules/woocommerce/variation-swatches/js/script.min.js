"use strict";if(void 0===woostifyEvent)var woostifyEvent={};var woostifyAvailableVariations=function(t){var e=t.closest("#woostify-quick-view-panel")?document.getElementById("woostify-quick-view-panel"):document.getElementById("view");if(e){if(document.querySelectorAll("form.composite_form").length)e.querySelectorAll(".composite_component").forEach(function(t){var e=t.querySelectorAll('.variations [data-attribute_name^="attribute_"] option');if(e.length){var a=[];e.forEach(function(t){var e=t.getAttribute("value");e&&!t.disabled&&a.push(e)}),a=a.filter(function(t,e,a){return a.indexOf(t)===e});var i=t.querySelectorAll(".variations .swatch");i.length&&i.forEach(function(t){var e=t.getAttribute("data-value");a.includes(e)?t.classList.remove("unavailable"):t.classList.add("unavailable")})}});else{var a=e.querySelectorAll('.variations [name^="attribute_"] option');if(a.length){var i=[];a.forEach(function(t){var e=t.getAttribute("value");e&&!t.disabled&&i.push(e)}),i=i.filter(function(t,e,a){return a.indexOf(t)===e});var s=e.querySelectorAll(".variations .swatch");s.length&&s.forEach(function(t){var e=t.getAttribute("data-value");i.includes(e)?t.classList.remove("unavailable"):t.classList.add("unavailable")})}}}},woostifyVariationSwatches=function(){var t=document.querySelectorAll("form.composite_form .composite_component"),e=t.length?t:document.querySelectorAll("form.variations_form");if(e.length)for(var a=0,i=e.length;a<i;a++){var s=e[a],o=s.querySelectorAll(".swatch");if(!o.length)return;var r=[],l=new Event("change",{bubbles:!0}),c=new Event("woostify_no_matching_variations");o.forEach(function(t){t.onclick=function(e){if(e.preventDefault(),!t.classList.contains("unavailable")){var a=t.closest(".variations"),i=t.closest(".value"),o=(a.querySelectorAll("select"),i.querySelector("select")),n=o.getAttribute("data-attribute_name")||o.getAttribute("name"),u=t.getAttribute("data-value"),d=o?o.querySelectorAll('option[value="'+u+'"]'):[],v=siblings(t);if(!d.length){s.dispatchEvent(c,t);return}-1===r.indexOf(n)&&r.push(n),t.classList.contains("selected")?(o.value="",t.classList.remove("selected"),delete r[r.indexOf(n)]):(t.classList.add("selected"),v.length&&v.forEach(function(t){t.classList.remove("selected")}),o.value=u),o.dispatchEvent(l)}}});var n=s.querySelector(".reset_variations");n&&!t.length&&n.addEventListener("click",function(){var t=s.querySelectorAll(".swatch");t.length&&t.forEach(function(t){t.classList.remove("unavailable","selected")}),r=[]}),s.addEventListener("woostify_no_matching_variations",function(){window.alert(wc_add_to_cart_variation_params.i18n_no_matching_variations_text)})}},woostifySwatchList=function(){var t=document.querySelectorAll(".swatch-list");t.length&&t.forEach(function(t){var e=t.closest(".product"),a=e.querySelector(".product-loop-image-wrapper"),i=e.querySelector(".product-loop-image"),s=t.querySelectorAll(".swatch");s.length&&s.forEach(function(t){var e=siblings(t),s=t.getAttribute("data-slug");t.classList.contains("selected")&&(i.setAttribute("srcset",""),i.src=s),t.onclick=function(){i.getAttribute("data-swatch")||i.setAttribute("data-swatch",i.src),a.classList.add("circle-loading"),i.setAttribute("srcset",""),e.length&&e.forEach(function(t){t.classList.remove("selected")}),t.classList.contains("selected")?(t.classList.remove("selected"),i.src=i.getAttribute("data-swatch")):(t.classList.add("selected"),i.src=s);var o=new Image;o.src=s,o.onload=function(){a.classList.remove("circle-loading")}}})})},variationAddUrl=function(){var t=document.querySelectorAll(".product-summary form.variations_form");if(t.length)for(var e=0,a=t.length;e<a;e++){var i=t[e],s=i.querySelectorAll(".swatch"),o=i.querySelector(".woostify-variation-swatches");if(!o||!o.classList.contains("url-active")||!s.length)return;s.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault();var a=t.getAttribute("data-value"),i=t.closest(".woostify-variation-swatches").getAttribute("data-attribute_name"),s=new URLSearchParams(window.location.search);this.classList.contains("selected")?s.set(i,a):s.delete(i),history.replaceState(null,null,"?"+s.toString())})});var r=i.querySelector(".reset_variations");r&&r.addEventListener("click",function(){var t=window.location.href,e=t.substring(0,t.indexOf("?"));window.history.replaceState({},document.title,e)})}};jQuery(document).ajaxStop(function(){woostifyEvent.productSwatchIconReady||(jQuery(document).on("click",".swatch-list .swatch",function(t){var e=jQuery(this).parents(".product-loop-wrapper").find(".product-loop-image-wrapper"),a=jQuery(this).parents(".product-loop-wrapper").find(".product-loop-image"),i=$(this).attr("data-slug");a.attr("data-swatch")||a.attr("data-swatch",a.attr("src")),e.addClass("circle-loading"),a.attr("srcset",""),jQuery(this).siblings().removeClass("selected"),$(this).hasClass("selected")?($(this).removeClass("selected"),a.attr("src",a.attr("data-swatch"))):($(this).addClass("selected"),a.attr("src",i));var s=new Image;s.src=i,s.onload=function(){e.removeClass("circle-loading")}}),woostifyEvent.productSwatchIconReady=1),woostifySwatchList()}),document.addEventListener("DOMContentLoaded",function(){!woostifyEvent.productSwatchReady&&(woostifySwatchList(),variationAddUrl(),jQuery(document.body).on("check_variations",function(t){woostifyVariationSwatches(),woostifyAvailableVariations(t.target)}),jQuery(document.body).on("woocommerce_variation_select_change",function(){var t=document.querySelectorAll("form.composite_form .composite_component");if(t.length)for(let e=0,a=t.length;e<a;e++){let i=t[e],s=i.querySelectorAll('.variations [data-attribute_name^="attribute_"]'),o=i.querySelectorAll(".swatch"),r=i.querySelector(".reset_variations");r&&r.addEventListener("click",function(t){t.preventDefault(),r.classList.remove("opacity");let e=i.querySelectorAll(".swatch");e.length&&e.forEach(function(t){t.classList.remove("unavailable","selected")});let a=i.querySelectorAll('.variations [data-attribute_name^="attribute_"] option');if(a.length){let s=[];a.forEach(function(t){let e=t.getAttribute("value");e&&!t.disabled&&s.push(e)}),s=s.filter(function(t,e,a){return a.indexOf(t)===e});let o=i.querySelectorAll(".variations .swatch");o.length&&o.forEach(function(t){let e=t.getAttribute("data-value");s.includes(e)?t.classList.remove("unavailable"):t.classList.add("unavailable")})}});let l=!1;s.length&&s.forEach(function(t){t.addEventListener("change",function(t){t.preventDefault(),r&&(""!=this[this.selectedIndex].value?(this.classList.add("has-value"),r.classList.add("opacity"),l=!0):(o.forEach(function(t){t.classList.contains("selected")&&(l=!0)}),l||r.classList.remove("opacity"),this.classList.remove("has-value")))})}),o.length&&o.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),r&&(t.classList.contains("selected")?r.classList.add("opacity"):i.querySelectorAll(".swatch.selected").length?(r.classList.add("opacity"),l=!0):(s.forEach(function(t){t.classList.contains("has-value")&&(l=!0)}),l||r.classList.remove("opacity")))})})}}),woostifyEvent.productSwatchReady=1)});